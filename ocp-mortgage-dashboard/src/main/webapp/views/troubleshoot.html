<div class="alert alert-success" ng-show="successVisible">
    <span class="pficon pficon-ok"></span>
    {{successMessage}}
</div>

<div class="alert alert-danger" ng-show="errorVisible">
    <span class="pficon pficon-error-circle-o"></span>
    {{errorMessage}}
</div>

<div class="row">
    <h4><b>Outstanding Troubleshoot Items</b></h4>
    <table class="table table-striped table-bordered">
        <thead>
        <tr>
            <th>Id</th>
            <th>Name</th>
            <th>Related Process Instance</th>
            <th>Container Id</th>
            <th>Error</th>
            <th>Actions</th>
        </tr>
        </thead>

        <tbody ng-repeat="item in items">
        <tr>
            <td>{{item["id"]}}</td>
            <td>{{item["parameters"]["NodeName"]}}</td>
            <td>{{item["processInstanceI  d"]}}</td>
            <td>{{item["containerId"]}}</td>
            <td>{{item["parameters"]["errorStack"] | limitTo: 800 }}</td>
            <td>
                <button
                        ng-show="item['task-status'] == 'Ready'"
                        ng-class="{'btn': true, 'btn-primary': true, disabled: taskInProgress}"
                        type="button"
                        ng-click="claimTask(item['task-id'])">
                    Claim
                </button>

                <button
                        ng-show="item['task-status'] == 'Reserved'"
                        ng-class="{'btn': true, 'btn-primary': true, disabled: taskInProgress}"
                        type="button"
                        ng-click="releaseTask(item['task-id'])">
                    Release
                </button>

                <button
                        ng-show="item['task-status'] == 'Reserved'"
                        ng-class="{'btn': true, 'btn-primary': true, disabled: taskInProgress}"
                        type="button"
                        ng-click="startTask(item['task-id'])">
                    Start
                </button>

                <button
                        ng-show="item['task-status'] == 'InProgress'"
                        ng-class="{'btn': true, 'btn-primary': true, disabled: (taskInProgressId != item['task-id'])}"
                        type="button"
                        ng-click="stopTask(item['task-id'])">
                    Stop
                </button>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<div class="row">
    <div ng-show="taskInProgress">
        <form class="form-horizontal">
            <div class="form-group">
                <label class="col-sm-3 control-label" for="applicantName">Applicant Name</label>
                <div class="col-sm-9">
                    <input ng-model="applicantName" type="text" id="applicantName" class="form-control">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label" for="applicantSsn">Social Security Number</label>
                <div class="col-sm-9">
                    <input ng-model="applicantSsn" type="text" id="applicantSsn" class="form-control">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label" for="applicantIncome">Annual Income</label>
                <div class="col-sm-9">
                    <input ng-model="applicantIncome" type="text" id="applicantIncome" class="form-control">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label" for="propertyAddress">Property Address</label>
                <div class="col-sm-9">
                    <input ng-model="propertyAddress" type="text" id="propertyAddress" class="form-control">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label" for="propertyPrice">Sales Price</label>
                <div class="col-sm-9">
                    <input ng-model="propertyPrice" type="text" id="propertyPrice" class="form-control">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label" for="downPayment">Down Payment</label>
                <div class="col-sm-9">
                    <input ng-model="downPayment" type="text" id="downPayment" class="form-control">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label" for="amortization">Amortization</label>
                <div class="col-sm-9">
                    <input ng-model="amortization" type="text" id="amortization" class="form-control">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label" for="apr">Annual Percentage Rate</label>
                <div class="col-sm-9">
                    <input ng-model="apr" type="text" id="apr" class="form-control">
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-3 col-sm-9">
                    <button ng-click="submitApp()" class="btn btn-primary">Submit Application</button>
                </div>
            </div>
        </form>
    </div>
</div>
